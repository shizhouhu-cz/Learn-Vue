# 逻辑复用

下面是 vue 中进行逻辑复用的集中常见方式及应用场景。

- 组件：需要对视图或逻辑进行复用。
- 组合式函数：仅需要对逻辑进行复用，相比无渲染组件，没有创建组件实例的开销。
- 自定义指令：所需功能仅能通过直接的 DOM 操作来实现。
- 插件：需要为 vue 提供全局功能的工具代码。

## 组合式函数

组合式函数是一个利用 vue 的组合式 API 来封装和复用**有状态逻辑**的函数。类似于`lodash`之类的工具函数库，我们称之为`无状态逻辑`函数。

### 示例

- 鼠标跟踪器
- 异步状态封装

### 约定和最佳实践

- 使用`use`作为前缀
- 函数定义要考虑响应式对象和非响应式对象的场景，保证追踪正确，`toValue()`函数可以剥离响应性，获取原始值。
- 返回值推荐使用一个非响应式对象，响应式对象作为其属性添加。这主要是为了在解构时保持响应性。
- 如果产生副作用，确保在`ummount`时清理副作用。
- 必须在`setup script`中同步调用，因为侦听器或计算属性都是需要绑定到组件实例上的。

## 自定义指令

## 插件
